<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="LoginApp.Maui.ViewsKoordinator.AsistenDosen"
             Title="Daftar Asisten Dosen"
             BackgroundColor="#f0f2f5">

    <ScrollView>
        <VerticalStackLayout Padding="20" Spacing="16">

            <!-- Tahun Perkuliahan + Tombol Dropdown -->
            <HorizontalStackLayout Spacing="12"
                                   HorizontalOptions="Center"
                                   Margin="0,10">
                <Label Text="Tahun Perkuliahan"
                       FontAttributes="Bold"
                       FontSize="20"
                       TextColor="Black"
                       VerticalTextAlignment="Center" />

                <Button Text="{Binding SelectedTahunText}"
                        Clicked="OnToggleDropdownClicked"
                        BackgroundColor="#dddddd"
                        FontAttributes="Bold"
                        WidthRequest="160"
                        HorizontalOptions="Center" />
            </HorizontalStackLayout>

            <!-- Dropdown Tahun -->
            <CollectionView x:Name="TahunDropdown"
                            IsVisible="{Binding IsDropdownVisible}"
                            ItemsSource="{Binding TahunList}"
                            SelectionMode="Single"
                            SelectionChanged="OnTahunSelected"
                            BackgroundColor="#eeeeee"
                            Margin="0,5"
                            WidthRequest="300">
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <Frame Padding="8" Margin="4" BorderColor="Gray" CornerRadius="6" BackgroundColor="#662382">
                            <Label Text="{Binding}" TextColor="White" HorizontalOptions="Center" />
                        </Frame>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>

            <!-- Daftar Asisten Dosen -->
            <CollectionView x:Name="AsistenList"
                            Margin="10">
                <CollectionView.ItemsLayout>
                    <GridItemsLayout Orientation="Vertical"
                                     Span="{OnIdiom Phone=2, Tablet=3, Desktop=4}"
                                     HorizontalItemSpacing="10"
                                     VerticalItemSpacing="10" />
                </CollectionView.ItemsLayout>

                <CollectionView.EmptyView>
                    <Label Text="Belum ada data asisten untuk tahun ini"
                           FontAttributes="Italic"
                           FontSize="14"
                           TextColor="Gray"
                           HorizontalOptions="Center"
                           VerticalOptions="Center"/>
                </CollectionView.EmptyView>

                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <Frame Padding="10"
                               Margin="5"
                               BackgroundColor="#d9ebf7"
                               BorderColor="#b0c4de"
                               CornerRadius="6"
                               HasShadow="True"
                               HorizontalOptions="FillAndExpand"
                               HeightRequest="130">
                            <Frame.GestureRecognizers>
                                <TapGestureRecognizer Command="{Binding BindingContext.NavigateToDetailCommand, Source={x:Reference AsistenList}}"
                                                      CommandParameter="{Binding}" />
                            </Frame.GestureRecognizers>

                            <VerticalStackLayout Spacing="4"
                                                 HorizontalOptions="Center"
                                                 VerticalOptions="Center">
                                <Label Text="{Binding Name}"
                                       FontSize="16"
                                       FontAttributes="Bold"
                                       TextColor="Black"
                                       HorizontalTextAlignment="Center" />
                                <Label Text="{Binding Username}"
                                       FontSize="14"
                                       TextColor="Black"
                                       HorizontalTextAlignment="Center" />
                            </VerticalStackLayout>
                        </Frame>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>

        </VerticalStackLayout>
    </ScrollView>

</ContentPage>
