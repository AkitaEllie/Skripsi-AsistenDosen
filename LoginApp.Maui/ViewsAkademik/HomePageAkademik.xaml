<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="LoginApp.Maui.ViewsAkademik.HomePageAkademik"
             Title="HomePageAkademik">

    <ScrollView>
        <VerticalStackLayout Padding="20" Spacing="15">

            <!-- Tahun Akademik Dropdown -->
            <Label Text="Tahun Perkuliahan"
                   FontAttributes="Bold"
                   FontSize="18"
                   TextColor="#444" />

            <Button Text="{Binding SelectedTahunAkademik.Label}"
                    Command="{Binding ToggleTahunDropdownCommand}"
                    BackgroundColor="White"
                    TextColor="Black"
                    BorderColor="#ccc"
                    CornerRadius="8"
                    HeightRequest="45"
                    Padding="15,0" />

            <!-- Dropdown List -->
            <Frame IsVisible="{Binding IsTahunDropdownVisible}"
                   BorderColor="#ddd"
                   CornerRadius="8"
                   Padding="0"
                   HasShadow="True"
                   ZIndex="10"
                   Margin="0,-5,0,0">
                <CollectionView ItemsSource="{Binding TahunAkademikList}"
                                SelectionChanged="OnTahunSelected"
                                SelectionMode="Single"
                                HeightRequest="150"
                                BackgroundColor="White">
                    <CollectionView.ItemTemplate>
                        <DataTemplate>
                            <Label Text="{Binding Label}"
                                   Padding="12"
                                   FontSize="16"
                                   TextColor="Black" />
                        </DataTemplate>
                    </CollectionView.ItemTemplate>
                </CollectionView>
            </Frame>

            <!-- Jadwal Perkuliahan -->
            <CollectionView ItemsSource="{Binding JadwalList}"
                            Margin="0,10,0,0">
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <Frame Padding="10"
                               Margin="5"
                               BorderColor="#ccc"
                               CornerRadius="6"
                               BackgroundColor="White"
                               HasShadow="False">
                            <Grid ColumnDefinitions="Auto,*,Auto"
                                  RowDefinitions="Auto,Auto,Auto">
                                <!-- Baris 1 -->
                                <Label Grid.Row="0" Grid.Column="0"
                                       Text="{Binding KodeMK}"
                                       FontAttributes="Bold"
                                       TextColor="#222" />
                                <Label Grid.Row="0" Grid.Column="1"
                                       Text="{Binding NamaMK}" />
                                <Label Grid.Row="0" Grid.Column="2"
                                       Text="{Binding Kelas}"
                                       HorizontalTextAlignment="End" />

                                <!-- Baris 2 -->
                                <Label Grid.Row="1" Grid.ColumnSpan="3"
                                       Text="{Binding Prodi}"
                                       FontSize="12"
                                       TextColor="Gray" />

                                <!-- Baris 3 -->
                                <StackLayout Grid.Row="2" Grid.ColumnSpan="3"
                                             Orientation="Horizontal"
                                             Spacing="10">
                                    <Label Text="{Binding NamaDosen}" />
                                    <Label Text="{Binding Hari}" />
                                    <Label Text="{Binding Waktu}" />
                                    <Label Text="{Binding Ruangan}" />
                                </StackLayout>
                            </Grid>
                        </Frame>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>

        </VerticalStackLayout>
    </ScrollView>

</ContentPage>
